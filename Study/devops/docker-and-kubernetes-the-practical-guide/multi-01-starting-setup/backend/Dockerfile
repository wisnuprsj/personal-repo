FROM node

WORKDIR /app

COPY package.json .

RUN npm install

COPY . .

ARG DEFAULT_PORT=80

ARG DEFAULT_MONGODB_HOST=mongodb

ARG DEFAULT_MONGODB_USER=admin

ARG DEFAULT_MONGODB_PASSWORD=admin

ENV PORT $DEFAULT_PORT

ENV MONGODB_HOST $DEFAULT_MONGODB_HOST

ENV MONGODB_USER $DEFAULT_MONGODB_USER

ENV MONGODB_PASSWORD $DEFAULT_MONGODB_PASSWORD

EXPOSE $PORT

CMD ["npm", "run", "dev"]